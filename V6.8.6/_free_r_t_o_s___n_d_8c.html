<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FreeRTOS-Plus-TCP: FreeRTOS_ND.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">FreeRTOS-Plus-TCP<span id="projectnumber">&#160;V4.2.3</span>
   </div>
   <div id="projectbrief">FreeRTOS TCP/IP library</div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_free_r_t_o_s___n_d_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">FreeRTOS_ND.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements a few functions that handle Neighbour Discovery and other ICMPv6 messages.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;task.h&quot;</code><br />
<code>#include &quot;FreeRTOS_IP.h&quot;</code><br />
<code>#include &quot;FreeRTOS_Sockets.h&quot;</code><br />
<code>#include &quot;FreeRTOS_IP_Private.h&quot;</code><br />
<code>#include &quot;FreeRTOS_ARP.h&quot;</code><br />
<code>#include &quot;FreeRTOS_UDP_IP.h&quot;</code><br />
<code>#include &quot;FreeRTOS_Routing.h&quot;</code><br />
<code>#include &quot;FreeRTOS_ND.h&quot;</code><br />
<code>#include &quot;FreeRTOS_IP_Timers.h&quot;</code><br />
<code>#include &quot;FreeRTOS_DNS.h&quot;</code><br />
<code>#include &quot;NetworkBufferManagement.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad17cb7fc17316079fcd13b6d49291062"><td class="memItemLeft" align="right" valign="top"><a id="ad17cb7fc17316079fcd13b6d49291062" name="ad17cb7fc17316079fcd13b6d49291062"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ndICMPv6_FLAG_SOLICITED</b>&#160;&#160;&#160;0x40000000U</td></tr>
<tr class="memdesc:ad17cb7fc17316079fcd13b6d49291062"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of Neighbour Advertisement packets - SOLICIT. <br /></td></tr>
<tr class="separator:ad17cb7fc17316079fcd13b6d49291062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7093818bef360f0220c7160d60a2a24e"><td class="memItemLeft" align="right" valign="top"><a id="a7093818bef360f0220c7160d60a2a24e" name="a7093818bef360f0220c7160d60a2a24e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ndICMPv6_FLAG_UPDATE</b>&#160;&#160;&#160;0x20000000U</td></tr>
<tr class="memdesc:a7093818bef360f0220c7160d60a2a24e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of Neighbour Advertisement packets - UPDATE. <br /></td></tr>
<tr class="separator:a7093818bef360f0220c7160d60a2a24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30a69421e255cecf44a800cb823783ea"><td class="memItemLeft" align="right" valign="top"><a id="a30a69421e255cecf44a800cb823783ea" name="a30a69421e255cecf44a800cb823783ea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ndDONT_BLOCK</b>&#160;&#160;&#160;( ( TickType_t ) 0 )</td></tr>
<tr class="memdesc:a30a69421e255cecf44a800cb823783ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">A block time of 0 simply means "don't block". <br /></td></tr>
<tr class="separator:a30a69421e255cecf44a800cb823783ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8522e644c704b38f741518d5c172afe0"><td class="memItemLeft" align="right" valign="top"><a id="a8522e644c704b38f741518d5c172afe0" name="a8522e644c704b38f741518d5c172afe0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ndECHO_DATA_FILL_BYTE</b>&#160;&#160;&#160;'x'</td></tr>
<tr class="memdesc:a8522e644c704b38f741518d5c172afe0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The character used to fill ICMP echo requests, and therefore also the character expected to fill ICMP echo replies. <br /></td></tr>
<tr class="separator:a8522e644c704b38f741518d5c172afe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1576f967dffabbc598706bf06da1849"><td class="memItemLeft" align="right" valign="top"><a id="ae1576f967dffabbc598706bf06da1849" name="ae1576f967dffabbc598706bf06da1849"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ndMAX_CACHE_AGE_BEFORE_NEW_ND_SOLICITATION</b>&#160;&#160;&#160;( 3U )</td></tr>
<tr class="memdesc:ae1576f967dffabbc598706bf06da1849"><td class="mdescLeft">&#160;</td><td class="mdescRight">When ucAge becomes 3 or less, it is time for a new neighbour solicitation. <br /></td></tr>
<tr class="separator:ae1576f967dffabbc598706bf06da1849"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3f0142d587f1a730ac071eece17c22b0"><td class="memItemLeft" align="right" valign="top">static eARPLookupResult_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a3f0142d587f1a730ac071eece17c22b0">prvMACResolve</a> (const IPv6_Address_t *pxAddressToLookup, MACAddress_t *const pxMACAddress, NetworkEndPoint_t **ppxEndPoint)</td></tr>
<tr class="memdesc:a3f0142d587f1a730ac071eece17c22b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">See if the MAC-address can be resolved because it is a multi-cast address.  <br /></td></tr>
<tr class="separator:a3f0142d587f1a730ac071eece17c22b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a9e8e50794a05bf41bbb244eb3bd55"><td class="memItemLeft" align="right" valign="top">static eARPLookupResult_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a51a9e8e50794a05bf41bbb244eb3bd55">prvNDCacheLookup</a> (const IPv6_Address_t *pxAddressToLookup, MACAddress_t *const pxMACAddress, NetworkEndPoint_t **ppxEndPoint)</td></tr>
<tr class="memdesc:a51a9e8e50794a05bf41bbb244eb3bd55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup an MAC address in the ND cache from the IP address.  <br /></td></tr>
<tr class="separator:a51a9e8e50794a05bf41bbb244eb3bd55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6297d8254ece5d6cfed45407695c13db"><td class="memItemLeft" align="right" valign="top">static NetworkEndPoint_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a6297d8254ece5d6cfed45407695c13db">pxFindLocalEndpoint</a> (void)</td></tr>
<tr class="memdesc:a6297d8254ece5d6cfed45407695c13db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the first end-point of type IPv6.  <br /></td></tr>
<tr class="separator:a6297d8254ece5d6cfed45407695c13db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0364c6655801cd0fe99a7b9e32e4e13"><td class="memItemLeft" align="right" valign="top">eARPLookupResult_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#aa0364c6655801cd0fe99a7b9e32e4e13">eNDGetCacheEntry</a> (IPv6_Address_t *pxIPAddress, MACAddress_t *const pxMACAddress, <a class="el" href="structstruct.html">struct</a> xNetworkEndPoint **ppxEndPoint)</td></tr>
<tr class="memdesc:aa0364c6655801cd0fe99a7b9e32e4e13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the MAC-address of an IPv6 address. It will first determine if is a multicast address, if not, it will check the ND cache.  <br /></td></tr>
<tr class="separator:aa0364c6655801cd0fe99a7b9e32e4e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f0c03919c7d846af63888edc90eff9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a76f0c03919c7d846af63888edc90eff9">vNDRefreshCacheEntry</a> (const MACAddress_t *pxMACAddress, const IPv6_Address_t *pxIPAddress, NetworkEndPoint_t *pxEndPoint)</td></tr>
<tr class="memdesc:a76f0c03919c7d846af63888edc90eff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a combination of IP-address, MAC-address and an end-point in a free location in the ND cache.  <br /></td></tr>
<tr class="separator:a76f0c03919c7d846af63888edc90eff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a690e13619aae09f4a0319f7496c55397"><td class="memItemLeft" align="right" valign="top"><a id="a690e13619aae09f4a0319f7496c55397" name="a690e13619aae09f4a0319f7496c55397"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>vNDAgeCache</b> (void)</td></tr>
<tr class="memdesc:a690e13619aae09f4a0319f7496c55397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reduce the age counter in each entry within the ND cache. An entry is no longer considered valid and is deleted if its age reaches zero. Just before getting to zero, 3 times a neighbour solicitation will be sent. <br /></td></tr>
<tr class="separator:a690e13619aae09f4a0319f7496c55397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e404b21495678754b9d54244f1420af"><td class="memItemLeft" align="right" valign="top"><a id="a7e404b21495678754b9d54244f1420af" name="a7e404b21495678754b9d54244f1420af"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>FreeRTOS_ClearND</b> (void)</td></tr>
<tr class="memdesc:a7e404b21495678754b9d54244f1420af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the Neighbour Discovery cache. <br /></td></tr>
<tr class="separator:a7e404b21495678754b9d54244f1420af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9462f6e1f9c7d1bf8c5d69b1f298b9b5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a9462f6e1f9c7d1bf8c5d69b1f298b9b5">prvReturnICMP_IPv6</a> (NetworkBufferDescriptor_t *const pxNetworkBuffer, size_t uxICMPSize)</td></tr>
<tr class="memdesc:a9462f6e1f9c7d1bf8c5d69b1f298b9b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an ICMPv6 packet to the peer.  <br /></td></tr>
<tr class="separator:a9462f6e1f9c7d1bf8c5d69b1f298b9b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4119410fff19474ea4a09719cd02f6f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a4119410fff19474ea4a09719cd02f6f5">vNDSendNeighbourSolicitation</a> (NetworkBufferDescriptor_t *pxNetworkBuffer, const IPv6_Address_t *pxIPAddress)</td></tr>
<tr class="memdesc:a4119410fff19474ea4a09719cd02f6f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send out an ND request for the IPv6 address contained in pxNetworkBuffer, and add an entry into the ND table that indicates that an ND reply is outstanding so re-transmissions can be generated.  <br /></td></tr>
<tr class="separator:a4119410fff19474ea4a09719cd02f6f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a627c34fe71a9c809369dae7e2b3b04db"><td class="memItemLeft" align="right" valign="top">BaseType_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a627c34fe71a9c809369dae7e2b3b04db">FreeRTOS_SendPingRequestIPv6</a> (const IPv6_Address_t *pxIPAddress, size_t uxNumberOfBytesToSend, TickType_t uxBlockTimeTicks)</td></tr>
<tr class="memdesc:a627c34fe71a9c809369dae7e2b3b04db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a PING request using an ICMPv6 format.  <br /></td></tr>
<tr class="separator:a627c34fe71a9c809369dae7e2b3b04db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2a6ecc454c9e097a7469f073400f5d"><td class="memItemLeft" align="right" valign="top"><a id="afc2a6ecc454c9e097a7469f073400f5d" name="afc2a6ecc454c9e097a7469f073400f5d"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>prvCheckWaitingBuffer</b> (const IPv6_Address_t *pxIPv6Address)</td></tr>
<tr class="memdesc:afc2a6ecc454c9e097a7469f073400f5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">When a neighbour advertisement has been received, check if 'pxARPWaitingNetworkBuffer' was waiting for this new address look-up. If so, feed it to the IP-task as a new incoming packet. <br /></td></tr>
<tr class="separator:afc2a6ecc454c9e097a7469f073400f5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22a9131182e83781ae248fb18c70fcd9"><td class="memItemLeft" align="right" valign="top">eFrameProcessingResult_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a22a9131182e83781ae248fb18c70fcd9">prvProcessICMPMessage_IPv6</a> (NetworkBufferDescriptor_t *const pxNetworkBuffer)</td></tr>
<tr class="memdesc:a22a9131182e83781ae248fb18c70fcd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process an ICMPv6 packet and send replies when applicable.  <br /></td></tr>
<tr class="separator:a22a9131182e83781ae248fb18c70fcd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b8b9d1be2cfa05a2fc0fe6c77c1269"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a74b8b9d1be2cfa05a2fc0fe6c77c1269">FreeRTOS_OutputAdvertiseIPv6</a> (NetworkEndPoint_t *pxEndPoint)</td></tr>
<tr class="memdesc:a74b8b9d1be2cfa05a2fc0fe6c77c1269"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send out a Neighbour Advertisement message.  <br /></td></tr>
<tr class="separator:a74b8b9d1be2cfa05a2fc0fe6c77c1269"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a937f6703e06d2e8534999073ebe2e5f4"><td class="memItemLeft" align="right" valign="top">BaseType_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_free_r_t_o_s___n_d_8c.html#a937f6703e06d2e8534999073ebe2e5f4">FreeRTOS_CreateIPv6Address</a> (IPv6_Address_t *pxIPAddress, const IPv6_Address_t *pxPrefix, size_t uxPrefixLength, BaseType_t xDoRandom)</td></tr>
<tr class="memdesc:a937f6703e06d2e8534999073ebe2e5f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an IPv16 address, based on a prefix.  <br /></td></tr>
<tr class="separator:a937f6703e06d2e8534999073ebe2e5f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aba34dbb3c2b407142501dc68ce6ac179"><td class="memItemLeft" align="right" valign="top"><a id="aba34dbb3c2b407142501dc68ce6ac179" name="aba34dbb3c2b407142501dc68ce6ac179"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>pcLOCAL_ALL_NODES_MULTICAST_IP</b> [ipSIZE_OF_IPv6_ADDRESS] = { 0xffU, 0x02U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x00U, 0x01U }</td></tr>
<tr class="memdesc:aba34dbb3c2b407142501dc68ce6ac179"><td class="mdescLeft">&#160;</td><td class="mdescRight">All nodes on the local network segment: IP address. <br /></td></tr>
<tr class="separator:aba34dbb3c2b407142501dc68ce6ac179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a490b897c1fbb6c82ff96dab6b9159698"><td class="memItemLeft" align="right" valign="top"><a id="a490b897c1fbb6c82ff96dab6b9159698" name="a490b897c1fbb6c82ff96dab6b9159698"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>pcLOCAL_ALL_NODES_MULTICAST_MAC</b> [ipMAC_ADDRESS_LENGTH_BYTES] = { 0x33U, 0x33U, 0x00U, 0x00U, 0x00U, 0x01U }</td></tr>
<tr class="memdesc:a490b897c1fbb6c82ff96dab6b9159698"><td class="mdescLeft">&#160;</td><td class="mdescRight">All nodes on the local network segment: MAC address. <br /></td></tr>
<tr class="separator:a490b897c1fbb6c82ff96dab6b9159698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9fb3e05395dc33ee03721a3cd342cc8"><td class="memItemLeft" align="right" valign="top"><a id="aa9fb3e05395dc33ee03721a3cd342cc8" name="aa9fb3e05395dc33ee03721a3cd342cc8"></a>
static NDCacheRow_t&#160;</td><td class="memItemRight" valign="bottom"><b>xNDCache</b> [ipconfigND_CACHE_ENTRIES]</td></tr>
<tr class="memdesc:aa9fb3e05395dc33ee03721a3cd342cc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ND cache. <br /></td></tr>
<tr class="separator:aa9fb3e05395dc33ee03721a3cd342cc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements a few functions that handle Neighbour Discovery and other ICMPv6 messages. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3f0142d587f1a730ac071eece17c22b0" name="a3f0142d587f1a730ac071eece17c22b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0142d587f1a730ac071eece17c22b0">&#9670;&#160;</a></span>prvMACResolve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static eARPLookupResult_t prvMACResolve </td>
          <td>(</td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxAddressToLookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MACAddress_t *const&#160;</td>
          <td class="paramname"><em>pxMACAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NetworkEndPoint_t **&#160;</td>
          <td class="paramname"><em>ppxEndPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>See if the MAC-address can be resolved because it is a multi-cast address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxAddressToLookup</td><td>The IP-address to look-up. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pxMACAddress</td><td>The resulting MAC-address is stored here. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ppxEndPoint</td><td>A pointer to an end-point pointer where the end-point will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An enum, either eARPCacheHit or eARPCacheMiss. </dd></dl>

</div>
</div>
<a id="a51a9e8e50794a05bf41bbb244eb3bd55" name="a51a9e8e50794a05bf41bbb244eb3bd55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51a9e8e50794a05bf41bbb244eb3bd55">&#9670;&#160;</a></span>prvNDCacheLookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static eARPLookupResult_t prvNDCacheLookup </td>
          <td>(</td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxAddressToLookup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MACAddress_t *const&#160;</td>
          <td class="paramname"><em>pxMACAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NetworkEndPoint_t **&#160;</td>
          <td class="paramname"><em>ppxEndPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lookup an MAC address in the ND cache from the IP address. </p>
<p>Look-up an IPv6 address in the cache.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxAddressToLookup</td><td>The IPv6 address to look-up.Ethernet packet. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pxMACAddress</td><td>The resulting MAC-address will be stored here. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ppxEndPoint</td><td>A pointer to a pointer to an end-point, where the end-point will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An enum: either eARPCacheHit or eARPCacheMiss. </dd></dl>

</div>
</div>
<a id="a6297d8254ece5d6cfed45407695c13db" name="a6297d8254ece5d6cfed45407695c13db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6297d8254ece5d6cfed45407695c13db">&#9670;&#160;</a></span>pxFindLocalEndpoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static NetworkEndPoint_t * pxFindLocalEndpoint </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Find the first end-point of type IPv6. </p>
<dl class="section return"><dt>Returns</dt><dd>The first IPv6 end-point found. </dd></dl>

</div>
</div>
<a id="aa0364c6655801cd0fe99a7b9e32e4e13" name="aa0364c6655801cd0fe99a7b9e32e4e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0364c6655801cd0fe99a7b9e32e4e13">&#9670;&#160;</a></span>eNDGetCacheEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eARPLookupResult_t eNDGetCacheEntry </td>
          <td>(</td>
          <td class="paramtype">IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxIPAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MACAddress_t *const&#160;</td>
          <td class="paramname"><em>pxMACAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structstruct.html">struct</a> xNetworkEndPoint **&#160;</td>
          <td class="paramname"><em>ppxEndPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the MAC-address of an IPv6 address. It will first determine if is a multicast address, if not, it will check the ND cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxIPAddress</td><td>The IPv6 address to be looked up. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pxMACAddress</td><td>The MAC-address found. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ppxEndPoint</td><td>A pointer to a pointer to an end-point, where the end-point will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An enum which says whether the address was found: eARPCacheHit or eARPCacheMiss. </dd></dl>

</div>
</div>
<a id="a76f0c03919c7d846af63888edc90eff9" name="a76f0c03919c7d846af63888edc90eff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f0c03919c7d846af63888edc90eff9">&#9670;&#160;</a></span>vNDRefreshCacheEntry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vNDRefreshCacheEntry </td>
          <td>(</td>
          <td class="paramtype">const MACAddress_t *&#160;</td>
          <td class="paramname"><em>pxMACAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxIPAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">NetworkEndPoint_t *&#160;</td>
          <td class="paramname"><em>pxEndPoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a combination of IP-address, MAC-address and an end-point in a free location in the ND cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxMACAddress</td><td>The MAC-address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pxIPAddress</td><td>The IP-address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pxEndPoint</td><td>The end-point through which the IP-address can be reached. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9462f6e1f9c7d1bf8c5d69b1f298b9b5" name="a9462f6e1f9c7d1bf8c5d69b1f298b9b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9462f6e1f9c7d1bf8c5d69b1f298b9b5">&#9670;&#160;</a></span>prvReturnICMP_IPv6()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void prvReturnICMP_IPv6 </td>
          <td>(</td>
          <td class="paramtype">NetworkBufferDescriptor_t *const&#160;</td>
          <td class="paramname"><em>pxNetworkBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>uxICMPSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return an ICMPv6 packet to the peer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxNetworkBuffer</td><td>The Ethernet packet. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uxICMPSize</td><td>The number of bytes to be sent. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4119410fff19474ea4a09719cd02f6f5" name="a4119410fff19474ea4a09719cd02f6f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4119410fff19474ea4a09719cd02f6f5">&#9670;&#160;</a></span>vNDSendNeighbourSolicitation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vNDSendNeighbourSolicitation </td>
          <td>(</td>
          <td class="paramtype">NetworkBufferDescriptor_t *&#160;</td>
          <td class="paramname"><em>pxNetworkBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxIPAddress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send out an ND request for the IPv6 address contained in pxNetworkBuffer, and add an entry into the ND table that indicates that an ND reply is outstanding so re-transmissions can be generated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxNetworkBuffer</td><td>The network buffer in which the message shall be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pxIPAddress</td><td>The IPv6 address that is asked to send a Neighbour Advertisement.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Send out an ND request for the IPv6 address contained in pxNetworkBuffer, and add an entry into the ND table that indicates that an ND reply is outstanding so re-transmissions can be generated. </dd></dl>

</div>
</div>
<a id="a627c34fe71a9c809369dae7e2b3b04db" name="a627c34fe71a9c809369dae7e2b3b04db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a627c34fe71a9c809369dae7e2b3b04db">&#9670;&#160;</a></span>FreeRTOS_SendPingRequestIPv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseType_t FreeRTOS_SendPingRequestIPv6 </td>
          <td>(</td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxIPAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>uxNumberOfBytesToSend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>uxBlockTimeTicks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a PING request using an ICMPv6 format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxIPAddress</td><td>Send an IPv6 PING request. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uxNumberOfBytesToSend</td><td>The number of bytes to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uxBlockTimeTicks</td><td>The maximum number of clock-ticks to wait while putting the message on the queue for the IP-task.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>When failed: pdFAIL, otherwise the PING sequence number. </dd></dl>

</div>
</div>
<a id="a22a9131182e83781ae248fb18c70fcd9" name="a22a9131182e83781ae248fb18c70fcd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22a9131182e83781ae248fb18c70fcd9">&#9670;&#160;</a></span>prvProcessICMPMessage_IPv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eFrameProcessingResult_t prvProcessICMPMessage_IPv6 </td>
          <td>(</td>
          <td class="paramtype">NetworkBufferDescriptor_t *const&#160;</td>
          <td class="paramname"><em>pxNetworkBuffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process an ICMPv6 packet and send replies when applicable. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxNetworkBuffer</td><td>The Ethernet packet which contains an IPv6 message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A const value 'eReleaseBuffer' which means that the network must still be released. </dd></dl>

</div>
</div>
<a id="a74b8b9d1be2cfa05a2fc0fe6c77c1269" name="a74b8b9d1be2cfa05a2fc0fe6c77c1269"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74b8b9d1be2cfa05a2fc0fe6c77c1269">&#9670;&#160;</a></span>FreeRTOS_OutputAdvertiseIPv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FreeRTOS_OutputAdvertiseIPv6 </td>
          <td>(</td>
          <td class="paramtype">NetworkEndPoint_t *&#160;</td>
          <td class="paramname"><em>pxEndPoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send out a Neighbour Advertisement message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pxEndPoint</td><td>The end-point to use. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a937f6703e06d2e8534999073ebe2e5f4" name="a937f6703e06d2e8534999073ebe2e5f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a937f6703e06d2e8534999073ebe2e5f4">&#9670;&#160;</a></span>FreeRTOS_CreateIPv6Address()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BaseType_t FreeRTOS_CreateIPv6Address </td>
          <td>(</td>
          <td class="paramtype">IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxIPAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IPv6_Address_t *&#160;</td>
          <td class="paramname"><em>pxPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>uxPrefixLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BaseType_t&#160;</td>
          <td class="paramname"><em>xDoRandom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an IPv16 address, based on a prefix. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pxIPAddress</td><td>The location where the new IPv6 address will be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">pxPrefix</td><td>The prefix to be used. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uxPrefixLength</td><td>The length of the prefix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">xDoRandom</td><td>A non-zero value if the bits after the prefix should have a random value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pdPASS if the operation was successful. Or pdFAIL in case xApplicationGetRandomNumber() returned an error. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="_free_r_t_o_s___n_d_8c.html">FreeRTOS_ND.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
